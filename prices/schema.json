{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://eu-cloud-prices/prices/schema.json",
  "title": "Cloud Provider Price File",
  "description": "Schema for EU cloud provider pricing data files",
  "type": "object",
  "required": ["provider", "fetched_at", "manual", "instances"],
  "properties": {
    "provider": {
      "type": "string",
      "description": "Provider identifier (lowercase, matches filename)"
    },
    "fetched_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when data was fetched"
    },
    "source": {
      "type": "string",
      "description": "Data source description or URL"
    },
    "source_url": {
      "type": "string",
      "format": "uri",
      "description": "API endpoint or webpage URL for pricing data"
    },
    "manual": {
      "type": "boolean",
      "description": "True if data was manually collected, false if from API"
    },
    "control_plane_cost": {
      "type": ["number", "null"],
      "minimum": 0,
      "description": "Monthly cost for Kubernetes control plane in EUR. 0 = free, null = no K8s support"
    },
    "instances": {
      "type": "array",
      "description": "List of VM/compute instance types",
      "items": {
        "$ref": "#/$defs/instance"
      }
    },
    "gpu_instances": {
      "type": "array",
      "description": "List of GPU-enabled instance types (optional)",
      "items": {
        "$ref": "#/$defs/gpu_instance"
      }
    },
    "load_balancer": {
      "$ref": "#/$defs/load_balancer"
    },
    "block_storage": {
      "$ref": "#/$defs/block_storage"
    },
    "object_storage": {
      "$ref": "#/$defs/object_storage"
    },
    "egress": {
      "$ref": "#/$defs/egress"
    },
    "primary_ip": {
      "$ref": "#/$defs/primary_ip"
    },
    "snapshots": {
      "$ref": "#/$defs/snapshots"
    },
    "notes": {
      "type": "string",
      "description": "Additional notes about the provider or data"
    }
  },
  "$defs": {
    "instance": {
      "type": "object",
      "required": ["id", "name", "vcpu", "ram_gb", "disk_gb", "price_monthly", "currency"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique instance identifier"
        },
        "name": {
          "type": "string",
          "description": "Display name for the instance type"
        },
        "vcpu": {
          "type": "number",
          "minimum": 0.1,
          "description": "Number of virtual CPUs (can be fractional for shared instances)"
        },
        "ram_gb": {
          "type": "number",
          "minimum": 0,
          "description": "RAM in gigabytes"
        },
        "disk_gb": {
          "type": "integer",
          "minimum": 0,
          "description": "Included disk storage in GB. 0 = network storage required"
        },
        "disk_type": {
          "type": "string",
          "enum": ["ssd", "nvme", "hdd", "network", "block-storage-required"],
          "description": "Type of storage"
        },
        "price_hourly": {
          "type": ["number", "null"],
          "minimum": 0,
          "description": "Hourly price"
        },
        "price_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Monthly price (typically ~730 hours)"
        },
        "currency": {
          "type": "string",
          "enum": ["EUR", "USD"],
          "description": "Price currency"
        },
        "architecture": {
          "type": "string",
          "enum": ["x86", "arm64"],
          "description": "CPU architecture"
        },
        "location": {
          "type": "string",
          "description": "Region/location code (e.g., 'eu', 'eu-central-1', 'fr-par-1')"
        },
        "category": {
          "type": "string",
          "enum": ["standard", "shared", "dedicated", "compute", "memory", "storage", "general", "development", "production", "burstable", "local-storage"],
          "description": "Instance category/type"
        },
        "range": {
          "type": "string",
          "description": "Product range/tier (e.g., 'General Purpose', 'Specialized')"
        },
        "cpu_type": {
          "type": "string",
          "description": "CPU model description"
        }
      }
    },
    "gpu_instance": {
      "type": "object",
      "required": ["id", "name", "vcpu", "ram_gb", "gpu", "gpu_count", "price_monthly", "currency"],
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "vcpu": {
          "type": "integer",
          "minimum": 1
        },
        "ram_gb": {
          "type": "number",
          "minimum": 0
        },
        "disk_gb": {
          "type": "integer",
          "minimum": 0
        },
        "gpu": {
          "type": "string",
          "description": "GPU model (e.g., 'NVIDIA A2', 'NVIDIA A100')"
        },
        "gpu_count": {
          "type": "integer",
          "minimum": 1,
          "description": "Number of GPUs"
        },
        "price_monthly": {
          "type": "number",
          "minimum": 0
        },
        "currency": {
          "type": "string",
          "enum": ["EUR", "USD"]
        }
      }
    },
    "load_balancer": {
      "type": "object",
      "required": ["price_monthly"],
      "properties": {
        "price_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Base monthly cost for load balancer"
        },
        "price_hourly": {
          "type": "number",
          "minimum": 0
        },
        "currency": {
          "type": "string",
          "enum": ["EUR", "USD"]
        },
        "type": {
          "type": "string",
          "description": "Load balancer type (e.g., 'Network', 'Application')"
        },
        "specs": {
          "type": "string",
          "description": "Included specs"
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "block_storage": {
      "type": "object",
      "required": ["price_per_gb_monthly"],
      "properties": {
        "price_per_gb_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Price per GB per month"
        },
        "ssd_price_per_gb_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "SSD storage price if different from default"
        },
        "currency": {
          "type": "string",
          "enum": ["EUR", "USD"]
        },
        "type": {
          "type": "string",
          "description": "Storage type (e.g., 'SSD', 'NVMe', 'HDD', 'gp3')"
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "object_storage": {
      "type": "object",
      "required": ["price_per_gb_monthly"],
      "properties": {
        "price_per_gb_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Price per GB per month for standard storage"
        },
        "archive_price_per_gb_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Archive/cold storage price per GB"
        },
        "egress_price_per_gb": {
          "type": "number",
          "minimum": 0,
          "description": "Egress price per GB from object storage"
        },
        "base_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Base monthly fee if applicable"
        },
        "included_storage_tb": {
          "type": "number",
          "minimum": 0,
          "description": "Storage included in base fee"
        },
        "currency": {
          "type": "string",
          "enum": ["EUR", "USD"]
        },
        "type": {
          "type": "string",
          "description": "Storage type (e.g., 'S3-compatible', 'S3 Standard')"
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "egress": {
      "type": "object",
      "properties": {
        "free_tb": {
          "type": ["number", "string"],
          "description": "Free egress in TB. Use 'unlimited' for unlimited free egress"
        },
        "price_per_gb": {
          "type": "number",
          "minimum": 0,
          "description": "Price per GB for egress overage"
        },
        "price_per_gb_overage": {
          "type": "number",
          "minimum": 0,
          "description": "Alternative key for overage pricing"
        },
        "bandwidth_gbps": {
          "type": "number",
          "minimum": 0,
          "description": "Included bandwidth in Gbps"
        },
        "currency": {
          "type": "string",
          "enum": ["EUR", "USD"]
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "primary_ip": {
      "type": "object",
      "properties": {
        "price_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Monthly cost for primary IPv4 address"
        },
        "ipv4_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Alternative key for IPv4 pricing"
        },
        "ipv6_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Monthly cost for IPv6 (usually 0)"
        },
        "currency": {
          "type": "string",
          "enum": ["EUR", "USD"]
        }
      }
    },
    "snapshots": {
      "type": "object",
      "properties": {
        "price_per_gb_monthly": {
          "type": "number",
          "minimum": 0,
          "description": "Price per GB per month for snapshots"
        },
        "currency": {
          "type": "string",
          "enum": ["EUR", "USD"]
        }
      }
    }
  }
}
